import org.apache.tools.ant.filters.ReplaceTokens

plugins {
    id "application"
    id "com.github.johnrengelman.shadow" version "7.1.1"
}

mainClassName = "org.springframework.boot.loader.JarLauncher"
archivesBaseName = "lavasrc-plugin"

sourceCompatibility = JavaVersion.VERSION_17
targetCompatibility = JavaVersion.VERSION_17

dependencies {
    compileOnly("dev.arbjerg.lavalink:plugin-api:4.0.0-beta.1")
//    runtimeOnly("dev.arbjerg.lavalink:Lavalink-Server:4.0.0-beta.1")
//    runtimeOnly("dev.arbjerg.lavalink:plugin-api:4.0.0-beta.1")
    implementation project(":main")
}

processResources {
    filter(ReplaceTokens, tokens: [
        VERSION: project.version,
    ])
}

shadowJar {
    archiveClassifier.set("")
    dependsOn(distTar, distZip)
}

publishing {
    publications {
        maven(MavenPublication) {
            pom {
                artifactId archivesBaseName
                artifacts {
                    shadowJar
                }
            }
        }
    }
}