plugins {
    id "java-library"
    id "maven-publish"
}

archivesBaseName = "lavasrc"

dependencies {
    compileOnly "com.github.walkyst:lavaplayer-fork:1.3.98.4"
    implementation "org.jsoup:jsoup:1.14.3"
    implementation "commons-io:commons-io:2.6"
}

var isMavenDefined = findProperty("MAVEN_USERNAME") != null && findProperty("MAVEN_PASSWORD") != null

publishing {
    publications {
        maven(MavenPublication) {
            pom {
                from components.java
                artifactId archivesBaseName
            }
        }
    }
    if (isMavenDefined) {
        System.out.println("Publishing to Maven Repo")
        repositories {
            maven {
                name = "Reposilite"
                url = "https://maven.topi.wtf"
                credentials {
                    username = findProperty("MAVEN_USERNAME")
                    password = findProperty("MAVEN_PASSWORD")
                }
            }
        }
    }
}
